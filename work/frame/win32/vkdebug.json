{
	"version": 2,
	"engine": "NebulaTrifid",
	"framescript": 
	{
		"renderTextures":
		[
			{ "name": "NormalBuffer", 	"format": "A8R8G8B8", 		"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "DepthBuffer", 	"format": "R32F", 			"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "AlbedoBuffer", 	"format": "A8R8G8B8", 		"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "SpecularBuffer", "format": "A8R8G8B8", 		"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "EmissiveBuffer", "format": "A16B16G16R16F", 	"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "LightBuffer", 	"format": "A16B16G16R16F", 	"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "ColorBuffer", 	"format": "A8B8G8R8", 		"relative": true, "width": 1.0, "height": 1.0 },
			{ "name": "__WINDOW__" }
		],
		
		"depthStencils":
		[
			{ "name":"ZBuffer", "format":"D32S8", "relative": true, "width": 1.0, "height": 1.0 }
		],
		
		"shaderStates":
		[
			{ "name": "PostEffectState", "shader":"shd:aaa" }
		],
		
		"globalState":
		{
			"name":"DeferredTextures",
			"variables":
			[
				{ "semantic":"AlbedoBuffer", 	"value":"AlbedoBuffer" },
				{ "semantic":"DepthBuffer", 	"value":"DepthBuffer" },
				{ "semantic":"NormalBuffer", 	"value":"NormalBuffer" },				
				{ "semantic":"SpecularBuffer", 	"value":"SpecularBuffer" },
				{ "semantic":"EmissiveBuffer", 	"value":"EmissiveBuffer" },
				{ "semantic":"LightBuffer", 	"value":"LightBuffer" }
			]
		},
		
		"pass":
		{
			"name": "DeferredPass",
			"attachments":
			[
				{ "name": "AlbedoBuffer", 	"clear":"0.1, 0.1, 0.1, 1", "store": true	},
				{ "name": "NormalBuffer", 	"clear":"0.5, 0.5, 0, 0", "store": true 	},
				{ "name": "DepthBuffer", 	"clear":"-1000, 0, 0, 0", "store": true 	},
				{ "name": "SpecularBuffer", "clear":"0, 0, 0, 0", "store": true			},
				{ "name": "EmissiveBuffer", "clear":"0, 0, 0, -1", "store": true		},
				{ "name": "LightBuffer", 	"clear":"0.1, 0.1, 0.1, 0.1", "store": true	},
				{ "name": "ColorBuffer", 	"clear":"0.5, 0.5, 0.5, 1", "store": true 	}
			],
			
			"depthStencil": { "name": "ZBuffer", "clear": 1, "clearStencil": 0, "store": false },
			
			"subpass":
			{
				"name": "GeometryPass",
				"dependencies": [], 
				"attachments": [0, 1, 2, 3, 4],
				"depth": true,
				"batch": "FlatGeometryLit", 
				"batch": "TesselatedGeometryLit"
			},
			"subpass":
			{
				"name": "LightPass",
				"dependencies": [0],
				"inputs": [0, 1, 2, 3, 4],
				"depth": true,
				"attachments": [5],
				"system": "Lights"
			},
			"subpass":
			{
				"name": "Unlit",
				"dependencies": [0, 1],
				"attachments": [5],
				"depth": true,
				"batch": "Unlit",
				"batch": "ParticleUnlit",
				"system": "Shapes"
			},
			"subpass":
			{
				"name": "FinishPass",
				"dependencies": [1, 2],
				"inputs": [5],
				"attachments": [6],
				"fullscreenEffect": 
				{
					"name": "ToScreen",
					"shaderState": "PostEffectState",
					"sizeFromTexture": "ColorBuffer"
				},
				"plugins":
				{
					"name":"UI",
					"filter":"UI"
				},
				"system": "Text"
			}
		},
		"swapbuffers":
		{
			"name":"SwapWindowBuffer",
			"texture":"__WINDOW__"
		},
		"blit":
		{
			"name":"CopyToWindow",
			"from":"ColorBuffer",
			"to":"__WINDOW__"
		}
	}
}
